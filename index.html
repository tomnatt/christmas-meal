<!DOCTYPE html>
<meta charset="utf-8">
<style>

.chart {
    border: 1px solid black;
}
.chart circle {
    fill: red;
}

line.guide {
    stroke: black;
}

</style>
<svg class="chart"></svg>
<script src="//d3js.org/d3.v3.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>

var starter = {};
var main = {};
var dessert = {};

var width = 600;
var height = 600;

// var x = d3.scale.linear()
//     .domain([0, d3.max(data)])
//     .range([0, width]);

var chart = d3.select(".chart")
    .attr("width", width)
    .attr("height", height);

$.getJSON("data.json", function(data) {

    // load the data
    $.each(data["person"], function(i, v) {
        
        // starters
        if (v["starter"] in starter) {
            starter[v["starter"]]++;
        } else {
            starter[v["starter"]] = 1;
        }

        // mains
        if (v["main"] in main) {
            main[v["main"]]++;
        } else {
            main[v["main"]] = 1;
        }

        // desserts
        if (v["dessert"] in dessert) {
            dessert[v["dessert"]]++;
        } else {
            dessert[v["dessert"]] = 1;
        }

    });

    // map
    console.log(starter);
    // keys
    console.log(Object.keys(starter));
    // values
    var starter_values = Object.keys(starter).map(function(v) { return starter[v]; });
    console.log(starter_values);

    var centre_line = chart.append("line")
        .attr("class", "guide")
        .attr("x1", width / 2)
        .attr("y1", 0)
        .attr("x2", width / 2)
        .attr("y2", height);

    var starter_values = Object.keys(starter).map(function(v) { return starter[v]; });
    var starter_height = 0;
    var starter_circles = chart.selectAll("circle")
        .data(starter_values)
        .enter().append("circle")
        .attr("cx", function(d, i) { return width / 2; })
        .attr("cy", function(d, i) { 
            var h = starter_height + (d * 10);
            starter_height = starter_height + (d * 10 * 2);
            return h;
        })
        .attr("r", function(d, i) { return d * 10; });

});

</script>